<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="stylesheet"  href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <title>Fitness Tracker</title>

</head>
<body>
  <div class="container">
    <div class="row">
        <div class="col s12">
            <nav>
                <div class="nav-wrapper">
                  <a href="#" class="brand-logo">Fitness Tracker</a>
                  <ul id="nav-mobile" class="right hide-on-med-and-down">
                    <li><a href="index.html">Profile</a></li>
                    <li><a href="dashboard.html">Dashboard</a></li>
                    <li><a href="useraccount.html">Account</a></li>
                  </ul>
                </div>
              </nav>
        </div>
    </div>
</div>
<!-- maybe add run -->
<button id = "genWorkout">Generate New Workout</button>
<button id = "addNewWorkout">Add additional workout</button>
<button id = "clearDailyWorkout">Clear Daily Workout</button>
<div id = "savedWorkouts">

</div>

<div id = "bodyChoices">
  <h2>Upper Body or Lower Body</h2>
  <button id="arms" class = "bodyChoice">Upper Body</button>
  <button id="legs" class = "bodyChoice">Lower Body</button>
</div>
<div id="muscleGroups">

</div>

<ul id="workouts">
    <!-- <li>Workout1</li>
        <p>Workout Details</p>
    <li>Workout2</li>
        <p>Workout Details</p>
    <li>Workout3</li>
        <p>Workout Details</p>
    <li>Workout4</li>
        <p>Workout Details</p> -->

</ul>

<div id="dailyWorkout">


</div>



    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script>
    // Work API source
    var apiURL = "https://wger.de/api/v2/"
    // Chooses English language
    var language = "?language=2"
    // Workouts approved by API 
    var status = "&status=2"
    var frontBack = true
    var muscleId = 1
    var id = 74
    var armLegIndictor = ""
    var muscleWorkArrayId = 1

    var dailyWorkoutArray= [];
    var muscleWorkoutArray= [];

    var arms = [{apiName:"Biceps brachii",
                userName:"Bicep",
                muscleid: "1",
                frontBack: true},
                {apiName: "Anterior deltoid",
                userName: "Shoulder",
                muscleid: 2,
                frontBack: true},
                {apiName: "Brachialis",
                userName: "Brachialis",
                muscleid: 13,
                frontBack:true},
                {apiName: "Latissimus dorsi",
                userName: "Lats",
                muscleid: 12,
                frontBack: false},
                {apiName: "Obliquus externus abdominis",
                userName: "Obliquus",
                muscleid: 14,
                frontBack: true},
                {apiName: "Pectoralis major",
                userName: "Pecks",
                muscleid: 4,
                frontBack: true},
                {apiName: "Rectus abdominis",
                userName: "Abs",
                muscleid: 6,
                frontBack: true},
                {apiName: "Serratus anterior",
                userName: "Serratus anterior",
                muscleid: 3,
                frontBack: true},
                {apiName: "Trapezius",
                userName: "Traps",
                muscleid: 9,
                frontBack: false},
                {apiName: "Triceps brachii",
                userName: "Triceps",
                muscleid: 5,
                frontBack: false}
]
    var legs = [{apiName: "Biceps femoris",
                userName: "Thigh",
                muscleid: 11,
                frontBack: false},
                {apiName: "Gastrocnemius",
                userName: "Gastrocnemius",
                muscleid: 7,
                frontBack: false},
                {apiName: "Gluteus maximus",
                userName: "Glutes",
                muscleid: 8,
                frontBack: false},
                {apiName: "Quadriceps femoris",
                userName: "Quads",
                muscleid: 10,
                frontBack: true},
                {apiName: "Soleus",
                userName: "Calves",
                muscleid: 15,
                frontBack: false}
    ]
 
    $("#muscleGroups").hide()
    $("#bodyChoices").hide()
    $("#workouts").hide()


    // genSavedWorkouts();


    $("#genWorkout").on("click",function(){
      generateWorkout()
    })


    function generateWorkout(){
    event.preventDefault() 
    $("#genWorkout").hide()
    $("#dailyWorkout").hide()
    
    $("#bodyChoices").show()
    }

    // createMuclesChoices()
// Create Muscles Selection

$(".bodyChoice").on("click",function(){
    event.preventDefault();  
    $("#bodyChoices").hide();
    $("#muscleGroups").show();
    armLegIndictor = $(this).attr("id")
    console.log(armLegIndictor)
    createMuclesChoices();
})


  function createMuclesChoices(){
    $("#muscleGroups").empty();
    if(armLegIndictor == "arms"){
      console.log("arms")
      for(i=0; i < arms.length ;i++){
        var rowEl = $("<button>")
        rowEl.addClass("muscleGroup")
        rowEl.attr("muscleId",arms[i].muscleid)
        rowEl.text(arms[i].userName)
        $("#muscleGroups").append(rowEl)
      }
    }
    else{
      console.log("legs")
      for(i=0; i < legs.length ;i++){
        var rowEl = $("<button>")
        rowEl.addClass("muscleGroup")
        rowEl.attr("muscleId",legs[i].muscleid)
        rowEl.text(legs[i].userName)
        $("#muscleGroups").append(rowEl)
      }
    }
    $(".muscleGroup").on("click",function(){
    event.preventDefault();  
    $("#muscleGroup").hide();
    $("#workouts").show();
    muscleId = $(this).attr("muscleId");
    console.log(muscleId)
    generateMuscleWorkout()
    
  })

  };

// example muscles=id

function generateMuscleWorkout (){
var queryURL = apiURL+ "exercise/" +language+status+"&muscles="+muscleId;
$.ajax({
    url: queryURL,
    method: "GET",
  }).then(function (response) {
    console.log(response);
    console.log(queryURL);
    $("#workouts").empty();
    muscleWorkoutArray = []

    // cylce though all workouts based on length
    for (i=0;i<response.results.length;i++){
      var workoutName = response.results[i].name;
      var workoutDetails = response.results[i].description;
      var workoutId = response.results[i].id;
      var rowEl = $("<button>");
      rowEl.addClass("indWorkout")
      rowEl.attr("workoutID",i)
      rowEl.text(workoutName)
      var workoutDescription = workoutDetails
      $("#workouts").append(rowEl)
      rowEl.after(workoutDescription)
      muscleWorkoutArray.push({workoutName:workoutName,workoutDescription:workoutDetails}) 

      // getImage(workoutId)
    }
    console.log(muscleWorkoutArray)
    $(".indWorkout").on("click",function(){
    event.preventDefault();  
    // $("#workouts").hide();
     muscleWorkArrayId = $(this).attr("workoutID");
     console.log(muscleWorkArrayId)
     var wName = muscleWorkoutArray[muscleWorkArrayId].workoutName
     var wDescr = muscleWorkoutArray[muscleWorkArrayId].workoutDescription


    dailyWorkoutArray.push({workName: wName, workDescription: wDescr})
    console.log(dailyWorkoutArray)
    generateDailyWorkout()

})
  });
}


function generateDailyWorkout (){
  $("#muscleGroups").hide();
  $("#workouts").hide();
  $("#dailyWorkout").show();
  $("#dailyWorkout").empty();


  for (i=0; i<dailyWorkoutArray.length; i++) {

    var workoutNameEl = $("<h4>")
      workoutNameEl.text(dailyWorkoutArray[i].workName)
    var workoutDescriptionEl = dailyWorkoutArray[i].workDescription
    $("#dailyWorkout").append(workoutNameEl)
    workoutNameEl.after(workoutDescriptionEl)

  }





  }

  $("#addNewWorkout").on("click",function(){
    generateWorkout()
    console.log("add new workout")
  })


//   function storeDailyworkout(){
//     localStorage.setItem("dailyWorkoutArray",JSON.stringify(dailyWorkoutArray));
// }

// function retrieveDailyworkout(){
//   dailyWorkoutArray = JSON.parse(localStorage.getItem("dailyWorkoutArray") || "[]")
// }

// if(dailyWorkoutArray == null){
//   retrieveDailyworkout()
// }




// function getImage(workoutId){
// var thumbnailURL = apiURL + "exerciseimage/?is_main=True&id=&muscles=1&category=8&exercise="+workoutId
// $.ajax({
//     url: thumbnailURL,
//     method: "GET",
//   }).then(function (response) {
//     console.log(response);
//     console.log(thumbnailURL)
//     // var thumbnailImage=response.small.url;
//     // console.log(thumbnailImage)
    
//   });
// };


//         // Retreive Workout
// $.ajax({
//     url: "https://wger.de/api/v2/exercise/?language=2",
//     method: "GET",
//   }).then(function (response) {
//     console.log(response);
//   });


// //   get thumbnail based on work out id
//   $.ajax({
//     url: "https://wger.de/api/v2/exerciseimage/31/thumbnails/",
//     method: "GET",
//   }).then(function (response) {
//     console.log(response);
//   });
// //   //   get thumbnail based on work out id
// //   $.ajax({
// //     url: "https://wger.de/api/v2/exerciseiinfo/31",
// //     method: "GET",
// //   }).then(function (response) {
// //     console.log(response);
// //   });
// // //   get thumbnail based on work out id
// $.ajax({
//     url: "https://wger.de/api/v2/exercise/?muscles=1&equipment=3&status=2&language=2",
//     method: "GET",
//   }).then(function (response) {
//     console.log(response);
//   });

//   // //   equipment
// $.ajax({
//     url: "https://wger.de/api/v2/muscle/",
//     method: "GET",
//   }).then(function (response) {
//     console.log(response);
//   });









    </script>      
</body>
</html>